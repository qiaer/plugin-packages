"use strict";const e=require("fs"),r=require("path");function u(o={}){const{swSrc:s=r.resolve(__dirname,"./sw.js"),mitmSrc:c=r.resolve(__dirname,"./mitm.html"),swDest:a="sw.js",mitmDest:m="mitm.html",outDir:d="dist"}=o;return{name:"vite-plugin-stream-saver",configResolved(t){},configureServer(t){t.middlewares.use(async(i,n,l)=>{if(i.url.indexOf(`/${a}`)!==-1){n.setHeader("Content-Type","application/javascript"),n.end(e.readFileSync(s));return}if(i.url.indexOf(`/${m}`)!==-1){n.setHeader("Content-Type","text/html"),n.end(e.readFileSync(c));return}l()})},generateBundle(){const t=r.resolve(d,a);e.existsSync(r.dirname(t))||e.mkdirSync(r.dirname(t),{recursive:!0}),e.copyFileSync(s,t);const i=r.resolve(d,m);e.existsSync(r.dirname(i))||e.mkdirSync(r.dirname(i),{recursive:!0}),e.copyFileSync(c,i)}}}module.exports=u;
